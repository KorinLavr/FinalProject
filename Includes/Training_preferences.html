<!DOCTYPE html>
<html lang="he">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>העדפות אימון | Fit Yourself Everywhere</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
        <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.3/themes/base/jquery-ui.css">
        <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
        <script src="https://code.jquery.com/ui/1.13.3/jquery-ui.js"></script>
        <link rel="stylesheet" href="../CSS/Training_preferences.css"> 
         <!-- Include Google Places Autocomplete library -->
        <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyACOUDai8CO8dPnmFLo1pLtAwbzuYTxzbM&libraries=places&callback=initAutocomplete" async defer></script> 
        <script>
            function initAutocomplete() {
                const input_location = document.getElementById('location_training');
                const autocomplete = new google.maps.places.Autocomplete(input_location, {
                    componentRestrictions: { country: 'il' }
                });
            
                autocomplete.addListener('place_changed', () => {
                    const place = autocomplete.getPlace();
                    if (!place.geometry || !place.name) {
                        alert("לא נמצאו פרטים זמינים עבור המקום שהוזן. אנא בדוק/י את הקלט ונסה/י שנית.");
                        return;
                    }
            
                    const lat = place.geometry.location.lat();
                    const lng = place.geometry.location.lng();
                    document.getElementById('latitude').value = lat;
                    document.getElementById('longitude').value = lng;
                    
                    console.log("Formatted Address:", place.formatted_address);
  
                });
            }
                        
            // Ensure initAutocomplete is called when the Google Places API script loads
            window.onload = function() {
                if (typeof google !== 'undefined' && typeof google.maps !== 'undefined') {
                    initAutocomplete();
                }
            }

        </script>
    </head>

    <body dir="rtl">
        <header>
            <img class = "logo_img" src="../Images/לוגו.png" alt="לוגו">
            <ul class="nav">
                <li class="nav-item home_pg">
                  <a class="nav-link" href="Trainee_profile.php">הפרופיל שלי</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="Logout.php">התנתקות</a>
                </li>
            </ul>
        </header>

        <main>
            <h2>העדפות אימון</h2>
            <p>יש למלא את השדות הבאים על מנת שהמערכת תוכל להציג עבורך את האימונים המתאימים ביותר בעת הרשמה לאימון</p>
            <form name="preferencesForm" id="preferencesForm" onsubmit="return handleSubmit();" action="Training_preferences.php" method="post">
                <input type="hidden" name="client_num" value="<?php echo htmlspecialchars($user['clientNum']); ?>">  <!-- Set the client_num value -->
                <p class="type_training fitness">סוג אימון</p>
                <button class="btn btn-success dropdown-toggle"
                    type="button" 
                    id="SelectDropdown"
                    data-bs-toggle="dropdown" 
                    aria-expanded="false">בחירת אימונים
                </button>
                <ul class="dropdown-menu">
                    <li>
                        <input type="text" id="searchInput" placeholder="חפש אימון..." class="form-control">
                    </li>
                    <li> 
                        <label> 
                        <input type="radio" name="training_type" id="אירובי מדרגה" value="אירובי מדרגה"> אירובי מדרגה
                        </label> 
                    </li>
                    <li> 
                        <label> 
                        <input type="radio" name="training_type" id="בטן,ישבן,ירכים" value="בטן,ישבן,ירכים"> בטן,ישבן,ירכים 
                        </label> 
                    </li>
                    <li> 
                        <label> 
                        <input type="radio" name="training_type" id="גמישות ומתיחות" value="גמישות ומתיחות"> גמישות ומתיחות
                        </label> 
                    </li>
                    <li> 
                        <label> 
                        <input type="radio" name="training_type" id="זומבה" value="זומבה"> זומבה 
                        </label> 
                    </li> 
                    <li> 
                        <label> 
                        <input type="radio" name="training_type" id="יוגה" value="יוגה"> יוגה    
                        </label> 
                    </li>
                    <li> 
                        <label> 
                        <input type="radio" name="training_type" id="יוגלאטיס" value="יוגלאטיס"> יוגלאטיס    
                        </label> 
                    </li>
                    <li> 
                        <label> 
                        <input type="radio" name="training_type" id="עיצוב" value="עיצוב"> עיצוב 
                        </label> 
                    </li> 
                    <li> 
                        <label> 
                        <input type="radio" name="training_type" id="פונקציונאלי" value="פונקציונאלי"> פונקציונאלי 
                        </label> 
                    </li>   
                    <li> 
                        <label> 
                        <input type="radio" name="training_type" id="פילאטיס" value="פילאטיס"> פילאטיס
                        </label> 
                    </li> 
                    <li> 
                        <label> 
                        <input type="radio" name="training_type" id="קיקבוקס" value="קיקבוקס"> קיקבוקס 
                        </label> 
                    </li>
                    <li> 
                        <label> 
                        <input type="radio" name="training_type" id="BODY PUMP" value="BODY PUMP"> BODY PUMP 
                        </label> 
                    </li> 
                    <li> 
                        <label> 
                        <input type="radio" name="training_type" id="BOOTCAMP מתקדמים" value="BOOTCAMP מתקדמים"> BOOTCAMP מתקדמים 
                        </label> 
                    </li>
                    <li> 
                        <label> 
                        <input type="radio" name="training_type" id="CORE מתיחות" value="CORE מתיחות"> CORE מתיחות 
                        </label> 
                    </li>
                    <li> 
                        <label> 
                        <input type="radio" name="training_type" id="HIT" value="HIT"> HIT 
                        </label> 
                    </li>
                    <li> 
                        <label> 
                        <input type="radio" name="training_type" id="PUMP מדרגה" value="PUMP מדרגה"> PUMP מדרגה 
                        </label> 
                    </li>
                    <li> 
                        <label> 
                        <input type="radio" name="training_type" id="TRX" value="TRX"> TRX 
                        </label> 
                    </li>  
                </ul>
                
                <div class="location-container">
                    <p class="location_training location">מיקום אימון</p>
                    <input type="text" id="location_training" name="location_training" placeholder="הזן מקום מועדף לאימון">
                    <input type="hidden" id="latitude" name="latitude">
                    <input type="hidden" id="longitude" name="longitude">
                </div>


                <p class="hour_training hour">טווח שעות הגעה לאימון</p>
                <label class="label_start" for="start">שעת התחלה</label>
                <input type="time" id="input_start" name="start_hour" min="06:00" max="23:00" value="06:00"/>
                <label class="label_end" for="end">שעת סיום</label>
                <input type="time" id="input_end" name="end_hour" min="06:00" max="23:00" value="23:00"/>
                <small>שעות תחילת האימונים הינם בין השעות 06:00-23:00.</small>
                <small>שעת התחלה וסיום מתייחסות לשעות שבהם אני פנוי ויכול להגיע לאימונים.</small>

                <div class="price-container">
                    <label class="price_training price" for="max_price">מחיר מקסימלי לאימון</label>
                    <input type="text" id="max_price" name="max_price" readonly="">
                </div>
                <br>
                <div id="slider-range"></div> 
                
                <div id="warningMessage"></div>
                
                <input class="submit" type="submit" value="שמירה" name="submit">
            </form>

            <a class="btn btn-secondary edit" role="button" id="editPreferencesButton" >ערוך העדפות אימון</a>
            
        </main>


        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
        <script src="../JS/Training_preferences.js"></script>
    </body>
</html>